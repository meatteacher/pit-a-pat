<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" th:href="@{/css/Content.css}">
    <link rel="stylesheet" th:href="@{/css/Login_center.css}">

</head>
<body>
<div class="wrap" th:fragment="login">
    <!--///////// 로그인 전 ///////// -->
    <div class="BWrap" sec:authorize="!isAuthenticated()">
        <h3>LOGIN</h3>
        <form th:action="@{/login}" method="post" class="login_box">
            <input class="id" type="email" name="email" required placeholder="이메일"/>
            <input class="pw" type="password" name="password" required placeholder="비밀번호"/>
            <button type="submit" class="login_btn">로그인</button>
        </form>
        <div class="singUp_btn">
            <a href="/register">이메일로 회원가입</a>
        </div>

        <div class="find_userInfo">
            <input type="checkbox">
            <span>로그인 상태유지</span>
            <div class="hr"></div>
            <a href="#">아이디 찾기</a>
            <div class="hr"></div>
            <a href="#">비밀번호 찾기</a>
        </div>

        <div class="simple_login">
            <div class="vl"></div>
            <span> 또는 간편 로그인</span>
            <div class="vl"></div>
        </div>

        <div class="google">
            <div class="G_icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="19.827" height="19.827" viewBox="0 0 19.827 19.827">
                    <g id="icons8-구글-로고" transform="translate(-4 -4)">
                        <path id="패스_83353" data-name="패스 83353"
                              d="M23.635,11.972h-.8v-.041H13.914V15.9h5.6A5.953,5.953,0,1,1,17.86,9.472l2.8-2.8a9.9,9.9,0,1,0,3.163,7.246A9.981,9.981,0,0,0,23.635,11.972Z"
                              fill="#ffc107"/>
                        <path id="패스_83354" data-name="패스 83354"
                              d="M6.306,9.3l3.257,2.389a5.936,5.936,0,0,1,9.46-2.216l2.8-2.8A9.894,9.894,0,0,0,6.306,9.3Z"
                              transform="translate(-1.163)" fill="#ff3d00"/>
                        <path id="패스_83355" data-name="패스 83355"
                              d="M15.021,35.958a9.867,9.867,0,0,0,6.647-2.574l-3.068-2.6a5.933,5.933,0,0,1-9.171-2.734L6.195,30.545A9.906,9.906,0,0,0,15.021,35.958Z"
                              transform="translate(-1.107 -12.131)" fill="#4caf50"/>
                        <path id="패스_83356" data-name="패스 83356"
                              d="M33.721,20.041h-.8V20H24v3.965h5.6a5.968,5.968,0,0,1-2.026,2.761h0l3.068,2.6a9.59,9.59,0,0,0,3.267-7.34A9.981,9.981,0,0,0,33.721,20.041Z"
                              transform="translate(-10.086 -8.069)" fill="#1976d2"/>
                    </g>
                </svg>
            </div>
            <span>Google로 시작하기</span>
        </div>
    </div>
    <div class="find_friend" sec:authorize="!isAuthenticated()">
        <a href="/matching" class="find_friend_a">
            <span>친구 찾으러 가기</span>
            <div class="move_icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="13" height="20" viewBox="0 0 13 20" fill="none">
                    <path d="M1.5 17.7941L10.929 10.0001L1.5 2.20605" fill="#387FEB"/>
                    <path d="M1.5 17.7941L10.929 10.0001L1.5 2.20605" stroke="white" stroke-width="3"
                          stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
        </a>
    </div>

    <!--/////////////////////////////-->
    <!--/////////  로그인 후 ///////// -->
    <!--/////////////////////////////-->

    <div class="AWrap" sec:authorize="isAuthenticated()">
        <div class="userTop_icon">
            <div class="alarmIcon">
                <svg xmlns="http://www.w3.org/2000/svg" width="21.42" height="26.191" viewBox="0 0 21.42 26.191">
                    <g id="alarm-bell" transform="translate(1 1)">
                        <path id="패스_39" data-name="패스 39" d="M10,21.75a2.254,2.254,0,0,0,4.321,0"
                              transform="translate(-2.448 0.829)" fill="none" stroke="#387feb" stroke-linecap="round"
                              stroke-linejoin="round" stroke-width="2"/>
                        <path id="패스_40" data-name="패스 40" d="M12,3.169V.75" transform="translate(-2.29 -0.75)"
                              fill="none" stroke="#387feb" stroke-linecap="round" stroke-linejoin="round"
                              stroke-width="2"/>
                        <path id="패스_41" data-name="패스 41"
                              d="M12.71,3A8.078,8.078,0,0,1,20.8,11.064c0,7.576,1.618,8.87,1.618,8.87H3s1.618-2.06,1.618-8.87A8.078,8.078,0,0,1,12.71,3Z"
                              transform="translate(-3 -0.581)" fill="none" stroke="#387feb" stroke-linecap="round"
                              stroke-linejoin="round" stroke-width="2"/>
                    </g>
                </svg>
            </div>
            <div class="logout_btn">
                <a th:href="@{/user/logout}" title="로그아웃">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17.754" height="17.753" viewBox="0 0 17.754 17.753">
                        <g id="그룹_162432" data-name="그룹 162432" transform="translate(-1855.58 -36.667)">
                            <g id="그룹_162431" data-name="그룹 162431">
                                <path id="패스_83391" data-name="패스 83391"
                                      d="M174.011,86l3.758,3.759-3.758,3.759"
                                      transform="translate(1694.564 -44.216)"
                                      fill="none" stroke="#387feb"
                                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                <line id="선_401" data-name="선 401"
                                      x2="10.022" transform="translate(1862.309 45.543)"
                                      fill="none" stroke="#387feb"
                                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                <path id="패스_83392" data-name="패스 83392"
                                      d="M45.728,55.753H40.716A.716.716,0,0,1,40,55.037V40.716A.716.716,0,0,1,40.716,40h5.012"
                                      transform="translate(1816.58 -2.333)"
                                      fill="none" stroke="#387feb"
                                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            </g>
                        </g>
                    </svg>
                </a>
            </div>
        </div>

        <!-- 프로필 그리드 - 강아지별로 표시 -->
        <div class="profiles_grid">
            <div th:each="dog : ${dogs}" class="profile_item">
                <!-- 강아지 이미지 또는 이름 첫 글자 -->
                <div class="profile_image" th:if="${dog.image != null and dog.image.diurl != null}">
                    <img th:src="@{${dog.image.diurl}}" th:alt="${dog.dname} + ' 프로필 이미지'">
                </div>
                <div class="profile_image profile_initial" th:if="${dog.image == null or dog.image.diurl == null}">
                    <span th:text="${#strings.substring(dog.dname, 0, 1)}">강</span>
                </div>

                <!-- 강아지 이름 -->
                <div class="profile_name" th:text="${dog.dname}">강아지 이름</div>
            </div>
        </div>

        <div class="u_name" th:text="${uname} + '님'">UserName님</div>

        <div class="divider"></div>

        <!-- 강아지별 상태 관리 -->
        <div class="pet_statuses">
            <div th:each="dog : ${dogs}" class="pet_status">
                <span class="status_label" th:text="${dog.dname}">강아지 이름</span>
                <div class="status_select">
                    <select class="status_dropdown" th:data-dog-id="${dog.dno}">
                        <option value="온라인" th:selected="${dog.status == '온라인'}">온라인</option>
                        <option value="밥 먹는 중" th:selected="${dog.status == '밥 먹는 중'}">밥 먹는 중</option>
                        <option value="산책 중" th:selected="${dog.status == '산책 중'}">산책 중</option>
                        <option value="잠자는 중" th:selected="${dog.status == '잠자는 중'}">잠자는 중</option>
                        <option value="으르렁" th:selected="${dog.status == '으르렁'}">으르렁</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- 가족 추가 버튼 수정 -->
        <a href="#" id="addFamilyBtn">
            <div class="add_family">
                <div class="plus_btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                        <g id="그룹_161716" data-name="그룹 161716" transform="translate(-1828 -308)">
                            <g id="타원_18" data-name="타원 18" transform="translate(1828 308)" fill="none" stroke="#387feb"
                               stroke-width="1">
                                <circle cx="8" cy="8" r="8" stroke="none"/>
                                <circle cx="8" cy="8" r="7.5" fill="none"/>
                            </g>
                            <path id="패스_63" data-name="패스 63" d="M3660.535,315.479h6.9"
                                  transform="translate(-1828.109 0.59)" fill="none" stroke="#387feb" stroke-linecap="round"
                                  stroke-width="1"/>
                            <path id="패스_64" data-name="패스 64" d="M0,0H6.9"
                                  transform="translate(1835.876 312.618) rotate(90)" fill="none" stroke="#387feb"
                                  stroke-linecap="round" stroke-width="1"/>
                        </g>
                    </svg>
                </div>
                <span>새로운 가족 추가하기</span>
            </div>
        </a>
    </div>
</div>

<!-- 친한 친구 즐겨찾기 -->
<div class="favorites-container" id="friendsContainer" sec:authorize="isAuthenticated()">
    <div class="favorites-header">
        <div class="favorites-title">친한 친구 즐겨찾기</div>
        <div class="favorites-actions">
            <button class="btn-icon btn-edit" id="btnEdit">
                <svg xmlns="http://www.w3.org/2000/svg" width="3" height="15" viewBox="0 0 3 15">
                    <circle cx="1.5" cy="1.5" r="1.5" fill="#b7b7b7"/>
                    <circle cx="1.5" cy="1.5" r="1.5" transform="translate(0 6)" fill="#b7b7b7"/>
                    <circle cx="1.5" cy="1.5" r="1.5" transform="translate(0 12)" fill="#b7b7b7"/>
                </svg>
            </button>
            <button class="btn-icon btn-done hidden" id="btnDone">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </button>
        </div>
    </div>

    <div class="friend-list" id="friendList">
        <!-- 친구 목록이 동적으로 로드됩니다 -->
    </div>

    <!-- 친구 찾기 버튼 -->
    <button class="btn-find-friends" onclick="window.location.href='/matching'">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
            <circle cx="8" cy="8" r="2"/>
            <path d="M10.5 10.5L15 15"/>
        </svg>
        친구 찾기
    </button>

    <button class="btn-add" id="btnAddFriend">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        친구 추가하기
    </button>
</div>

<!-- 여기에 외부 모달 HTML이 포함됩니다 (AddFamily_Modal.js에서 생성) -->

<!-- JavaScript 파일들 -->
<script src="/js/AddFamily_Modal.js"></script>  <!-- 먼저 로드 -->
<script src="/js/Login_center.js"></script>

<script th:inline="javascript">
    // DB에서 가져온 강아지 데이터
    window.dogsData = /*[[${dogs}]]*/ [];
    window.userName = /*[[${uname}]]*/ '';
    console.log('로그인 유저 정보:', window.userName);
    console.log('강아지 데이터:', window.dogsData);

</script>

</body>
</html>